"use strict";(self.webpackChunkTS24AppWeb=self.webpackChunkTS24AppWeb||[]).push([[926],{6926:(J,T,i)=>{i.r(T),i.d(T,{SendReportModule:()=>ge});var e=i(9808),x=i(8406),f=i(520),S=i(3075),R=i(9690),_=i(750),y=i(857),P=i(1963),I=i(7251),D=i(1708),w=i(8590),k=i(1609),b=i(9646),z=i(7445),r=i(4351),v=i(1005),n=i(8505),a=i(3900),d=i(5698),h=i(262),F=i(6431),G=i(2843),t=i(5e3);let M=(()=>{class l{constructor(s){this.ccfig=s}send(s,o){let u=JSON.stringify(o.body||{}),c=Object.assign({},o.params,{action:o.action}),g=this.ccfig.read().report_url;return(0,R.EU)(g)?(0,G._)(" L\u1ed7i kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c c\u1ea5u h\xecnh [report_url]"):this.ccfig.http().send(s,g,{params:c,body:u}).pipe((0,a.w)(m=>(0,b.of)(m.result)))}sendRow(s,o){return this.send("POST",{action:"appendRow",params:{email:s},body:{item:o}})}}return l.\u0275fac=function(s){return new(s||l)(t.LFG(F.t))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();var Z=i(4546),O=i(1894),L=i(3154),U=i(6042),E=i(2643),Q=i(2683),A=i(3677),N=i(4219),Y=i(5969);function j(l,C){1&l&&t._UZ(0,"i",24)}function H(l,C){1&l&&t._UZ(0,"i",25)}function X(l,C){1&l&&t._UZ(0,"i",24)}function B(l,C){1&l&&t._UZ(0,"i",25)}function V(l,C){1&l&&t._UZ(0,"i",26)}function $(l,C){1&l&&t._UZ(0,"i",24)}function K(l,C){1&l&&t._UZ(0,"i",18)}function W(l,C){1&l&&t._UZ(0,"i",24)}function q(l,C){1&l&&t._UZ(0,"i",18)}function ee(l,C){1&l&&t._UZ(0,"i",24)}let te=(()=>{class l{constructor(s,o,u,c,g,m,p){this.router=s,this.fb=o,this.csrv=u,this.cgrid=c,this.cuser=g,this.cgsend=m,this.cticket=p,this.KEY_GRID_TYPE="send_report",this.agOption=this.createAgOption(),this.agColumns=[],this.agColumnFix={},this.allData=[],this.agColumnApi=void 0,this.agApi=void 0,this.isRunImport=!1,this.isSendReport=!1,this.isLoadSearch=!1,this.isInitPage=!1,this.dataCache=[],this.totalRow=0,this.execRunImport=void 0,this.execRunSend=void 0,this.msgObj=this.msgSendDefault()}ngOnInit(){this.isInitPage=!0,this.searchForm=this.fb.group({fromToDate:[[new Date,new Date]]}),this.userDetail=this.cuser.read(),this.cgrid.getColumnAgFromCache(_.z).subscribe({next:s=>{this.agColumnFix=s.column_fix,this.agColumns=s.column_fix.def,this.isInitPage=!1},error:s=>{this.isInitPage=!1,console.log(s)}}),this.onSearchTicket()}get totalSelect(){return(0,R.Ft)(this.agApi)?0:this.agApi.getSelectedRows().length}get disabledAction(){return this.isLoadSearch||this.isRunImport||this.isSendReport||this.isInitPage}get config(){return this.csrv.config().read()}msgSendDefault(){return{title:"K\u1ebft qu\u1ea3",total:0,ok:0,err:0,action:""}}createAgOption(){return{domLayout:"autoHeight"}}sortGridByIndex(s){(0,R.Ft)(this.agApi)||this.agApi.setPostSort(o=>[{colId:"index_stt",sort:s}])}onAgInit(s){this.agColumnApi=s.columnApi,this.agApi=s.api,this.cgrid.getColumnAgFromCache(_.IN).subscribe({next:o=>{w.q.fixColDef(this.userDetail,this.agApi),w.q.showOnlyColumns(this.agColumnApi,null,o.grid_field.send_report)},error:o=>{this.isInitPage=!1,console.log(o)}})}onSearchTicket(){if(this.searchForm.invalid)return;this.dataCache=[],this.totalRow=0,this.isLoadSearch=!0;const s=this.searchForm.value,o=new e.uU("en-US").transform(s.fromToDate[0],"yyyy-MM-dd")+"T00:00:00",u=new e.uU("en-US").transform(s.fromToDate[1],"yyyy-MM-dd")+"T23:59:59";let c=`L\u1ea5y d\u1eef li\u1ec7u <br/>- T\u1eeb ng\xe0y: <b>${o}</b> <br/> - \u0110\u1ebfn ng\xe0y: <b>${u}</b>`,g=this.csrv.shared().loading(`\u0110ang ${c}`);this.cticket.findAll({create_max:u,create_min:o,is_send_ticket:!0,is_send_report:!1}).subscribe({next:p=>{this.dataCache=p=null===p?[]:p,this.convertTicket(p),this.isLoadSearch=!1,this.csrv.alert().remove(g.messageId),this.csrv.alert().success(`[${p.length}] L\u1ea5y Ticket xong r\u1ed3i.`),this.sortGridByIndex("asc")},error:p=>{this.isLoadSearch=!1,this.csrv.alert().remove(g.messageId),R.K$.log("X\u1ea3y ra l\u1ed7i l\u1ea5y d\u1eef li\u1ec7u:",p)}})}convertTicket(s=this.dataCache){this.allData=[];let o=1;for(let u in s){let c=s[u];for(let g in c.chanels){let m=Object.assign({},c,{index_stt:o++,first_chanel:c.chanels[g]});this.totalRow++,this.allData.push(m)}}}goHome(){this.router.navigateByUrl("/")}importXsl(){this.csrv.modal().create({nzTitle:"N\u1ea1p d\u1eef li\u1ec7u t\u1eeb file excel",nzContent:k.Q,nzClassName:"select-file",nzClosable:!1,nzMaskClosable:!1,nzFooter:null,nzComponentParams:{fileMau:this.config.report_filemau}}).afterClose.subscribe(o=>{if("import"===o.act){this.isRunImport=!0;let u=this.agApi.getDisplayedRowCount(),c=o.data.items.map((p,de)=>Object.assign(Object.assign({},p),{index_stt:u+de+1,ticket_text:p.ticket_number,chanels:[{value:p.channel_status}],software:{value:p.soft_name},content_help:p.content_support})),g=(0,b.of)(...c).pipe((0,r.b)(p=>(0,b.of)(p).pipe((0,v.g)(2e3))));this.execRunImport=g.subscribe({next:p=>this.agApi.updateRowData({add:[p]}),error:p=>console.warn(p)});let m=(0,z.F)(1e3).subscribe(p=>{!(0,R.Ft)(this.execRunImport)&&this.execRunImport.closed&&(this.isRunImport=!1,m.unsubscribe())})}})}onStopImport(){(0,R.Ft)(this.execRunImport)||this.execRunImport.unsubscribe()}exportXsl(){w.q.exportExcel(this.agApi,this.agColumnApi,{fileName:"send_report"})}onSendReport(){let s=this.agApi.getSelectedNodes();if(0===s.length)return void this.csrv.alert().warning("Vui l\xf2ng ch\u1ecdn d\u1eef li\u1ec7u \u0111\u1ec3 g\u1eedi");let o=this.cuser.read().od_user.email;if((0,R.EU)(o))return void this.csrv.modal().error({nzTitle:"C\u1ea3nh b\xe1o",nzContent:"L\u1ed7i x\xe1c nh\u1eadn email",nzClosable:!1,nzCancelText:"Oki",nzOkText:null});console.log(this.agApi.getDataAsExcel()),this.isSendReport=!0,this.msgObj=this.msgSendDefault();let u=s.map(g=>(0,b.of)(g.rowIndex).pipe((0,n.b)(m=>this.refreshRow(g,{send_status:!0})),(0,a.w)(m=>this.handlerSendNode(g,o))));this.execRunSend=(0,b.of)(...u).pipe((0,r.b)(g=>g.pipe((0,v.g)(2e3)))).subscribe(g=>{this.refreshRow(g.node,Object.assign(Object.assign({},g.data),{send_status:g.status,is_greport:!0})),"error"===g.status?(this.msgObj.err++,this.showErrorAndStop(g.node.data.ticket_id,g.data.error)):this.msgObj.ok++},g=>{this.msgObj.err++,this.refreshRow(g.node,{send_status:"error"}),this.showErrorAndStop(g.node.data.ticket_id,g.error)});let c=(0,z.F)(500).subscribe(g=>{!(0,R.Ft)(this.execRunSend)&&this.execRunSend.closed&&(this.isSendReport=!1,c.unsubscribe())},(0,d.q)(1))}handlerSendNode(s,o){let u=this.getAgValueText(s),c=s.data.ticket_id;return(0,R.J2)(c,0),this.cgsend.sendRow(o,u).pipe((0,n.b)(m=>this.cticket.updateOne(c,{is_greport:!0}).subscribe()),(0,a.w)(m=>(0,b.of)({status:"success",node:s,data:m})),(0,h.K)(m=>(0,b.of)({status:"error",node:s,data:{error:m}})))}getAgValueText(s){let o=this.agApi.valueService;return this.agColumnApi.getAllDisplayedColumns().map(c=>{let g=o.getValue(c,s);return{[c.getColId()]:g}}).reduce((c,g)=>Object.assign(Object.assign({},c),g),{})}onStopSendReport(){(0,R.Ft)(this.execRunSend)||(this.execRunSend.unsubscribe(),this.csrv.alert().error("\u0110\xe3 d\u1eebng g\u1eedi !!"))}showErrorAndStop(s,o){this.csrv.alert().error(`[${s}] > ${o.message}`),this.onStopSendReport()}refreshRow(s,o={}){w.q.refreshRow(this.agApi,s,o)}}return l.\u0275fac=function(s){return new(s||l)(t.Y36(x.F0),t.Y36(S.qu),t.Y36(P.X),t.Y36(D.P),t.Y36(y.a),t.Y36(M),t.Y36(I.k))},l.\u0275cmp=t.Xpm({type:l,selectors:[["cy-send-report"]],decls:54,vars:20,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row","tool-2","mb-5px","mt-15"],[1,"col-12"],["nz-form","",1,"search-form",3,"nzLayout","formGroup"],[2,"margin-left","2px","width","300px"],[3,"nzFormat"],["type","button","nz-button",""],["class","fa-regular fa-arrows-spin fa-spin",4,"ngIf"],["class","fa-regular fa-magnifying-glass",4,"ngIf"],["nz-button","","type","button","nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu","disabled"],["class","fa-regular fa-people-arrows",4,"ngIf"],["nzMenuNXDL",""],["nz-menu",""],["nz-menu-item","",3,"click"],["nz-menu-item",""],["target","_blank"],[1,"fa-regular","fa-file-excel"],["nz-button","",3,"disabled","click"],["class","fa-regular fa-file-excel",4,"ngIf"],["nz-button","",3,"disabled"],[1,"card","report-grid"],[3,"gridRows","columns"],[1,"fa-regular","fa-arrows-spin","fa-spin"],[1,"fa-regular","fa-magnifying-glass"],[1,"fa-regular","fa-people-arrows"]],template:function(s,o){if(1&s&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h1"),t._uU(3,"T\u1ea1o B\xe1o C\xe1o G\u1eedi Google Drive"),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"form",5)(8,"nz-form-item")(9,"nz-form-control",6),t._UZ(10,"nz-range-picker",7),t.qZA()(),t.TgZ(11,"nz-form-item")(12,"nz-form-control")(13,"button",8),t.YNc(14,j,1,0,"i",9),t.YNc(15,H,1,0,"i",10),t.TgZ(16,"span"),t._uU(17,"L\u1ea5y Ticket"),t.qZA()(),t.TgZ(18,"button",8),t.YNc(19,X,1,0,"i",9),t.YNc(20,B,1,0,"i",10),t.TgZ(21,"span"),t._uU(22,"L\u1ea5y DL BC"),t.qZA()(),t.TgZ(23,"button",11),t.YNc(24,V,1,0,"i",12),t.YNc(25,$,1,0,"i",9),t.TgZ(26,"span"),t._uU(27,"N\u1ea1p / Xu\u1ea5t DL"),t.qZA()(),t.TgZ(28,"nz-dropdown-menu",null,13)(30,"ul",14)(31,"li",15),t.NdJ("click",function(){return o.importXsl()}),t.TgZ(32,"a"),t._uU(33,"N\u1ea1p d\u1eef li\u1ec7u"),t.qZA()(),t.TgZ(34,"li",15),t.NdJ("click",function(){return o.exportXsl()}),t.TgZ(35,"a"),t._uU(36,"Xu\u1ea5t d\u1eef li\u1ec7u"),t.qZA()(),t.TgZ(37,"li",16)(38,"a",17),t._UZ(39,"i",18),t._uU(40,"File m\u1eabu "),t.qZA()()()(),t.TgZ(41,"button",19),t.NdJ("click",function(){return o.onSendReport()}),t.YNc(42,K,1,0,"i",20),t.YNc(43,W,1,0,"i",9),t.TgZ(44,"span"),t._uU(45,"G\u1eedi BC"),t.qZA()(),t.TgZ(46,"button",21),t.YNc(47,q,1,0,"i",20),t.YNc(48,ee,1,0,"i",9),t.TgZ(49,"span"),t._uU(50,"T\u1ea1o ticket"),t.qZA()()()()()()()()(),t.TgZ(51,"div",22)(52,"div",2),t._UZ(53,"cy-custom-grid",23),t.qZA()()),2&s){const u=t.MAs(29);t.xp6(7),t.Q6J("nzLayout","inline")("formGroup",o.searchForm),t.xp6(3),t.Q6J("nzFormat","yyyy-MM-dd"),t.xp6(4),t.Q6J("ngIf",o.isLoadSearch),t.xp6(1),t.Q6J("ngIf",!o.isLoadSearch),t.xp6(4),t.Q6J("ngIf",o.isLoadSearch),t.xp6(1),t.Q6J("ngIf",!o.isLoadSearch),t.xp6(3),t.Q6J("nzDropdownMenu",u)("disabled",o.disabledAction),t.xp6(1),t.Q6J("ngIf",!o.isRunImport),t.xp6(1),t.Q6J("ngIf",o.isRunImport),t.xp6(13),t.uIk("href",null==o.config?null:o.config.report_filemau,t.LSH),t.xp6(3),t.Q6J("disabled",o.disabledAction),t.xp6(1),t.Q6J("ngIf",!o.isSendReport),t.xp6(1),t.Q6J("ngIf",o.isSendReport),t.xp6(3),t.Q6J("disabled",o.disabledAction),t.xp6(1),t.Q6J("ngIf",!o.isSendReport),t.xp6(1),t.Q6J("ngIf",o.isSendReport),t.xp6(5),t.Q6J("gridRows",o.allData)("columns",o.agColumns)}},directives:[S._Y,S.JL,Z.Lr,S.sg,O.SK,Z.Nx,O.t3,Z.Fd,L.uw,L.wS,U.ix,E.dQ,Q.w,e.O5,A.wA,A.cm,A.RR,N.wO,N.r9,Y.P],styles:[".send-report .range-date{width:240px}.send-report .tool-send .send-log{width:unset}.send-report .tool-send .send-log label{margin-right:5px}.send-report .tool-send .send-log label i{margin-left:5px}.send-report .tool-send .send-log label .err{color:var(--red)}.send-report .tool-send .send-log label .oki{color:var(--success)}.send-report .tool-send .send-log label .total{color:var(--indigo)}.send-report .tool-send .send-log label .run{color:var(--info)}.send-report .tool-send .send-log label .act{color:var(--primary)}.send-report .ag-grid2 .fal{font-size:1rem;font-weight:inherit}.send-report .ag-grid2 .fal.fa-exclamation-circle{color:var(--red)}.send-report .ag-grid2 .fal.fa-times{color:var(--danger)}.send-report .ag-grid2 .fal.fa-comment,.send-report .ag-grid2 .fal .fa-check{color:var(--info)}\n"],encapsulation:2}),l})();var ne=i(7581),ae=i(1047),oe=i(3087),ie=i(5737),se=i(9727),re=i(1298);const le=[{path:"",component:te}];let ge=(()=>{class l{}return l.\u0275fac=function(s){return new(s||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[e.ez,f.JF,S.u5,S.UX,x.Bz.forChild(le),U.sL,oe.PV,A.b1,L.Hb,se.gR,ne.cS,ae.o7,ie.S,re.w,Z.U5]]}),l})()},5969:(J,T,i)=>{i.d(T,{P:()=>z});var e=i(5e3),f=(i(8267),(()=>{return(r=f||(f={}))[r.alpine=0]="alpine",r[r.material=1]="material",r[r.alpine_dark=2]="alpine_dark",r[r.balham=3]="balham",r[r.balham_dark=4]="balham_dark",r[r.fresh=5]="fresh",r[r.blue=6]="blue",r[r.bootstrap=7]="bootstrap",f;var r})());function S(r){switch(r){case f.alpine:return"ag-theme-alpine";case f.balham:return"ag-theme-balham";case f.alpine_dark:return"ag-theme-alpine-dark";case f.balham_dark:return"ag-theme-balham-dark";case f.material:return"ag-theme-material";case f.fresh:return"ag-theme-fresh";case f.blue:return"ag-theme-blue";case f.bootstrap:return"ag-theme-bootstrap";default:return"ag-theme-alpine"}}var R=i(8525),_=i(9690),y=i(9808),P=i(4376),I=i(3075);function D(r,v){if(1&r&&(e.TgZ(0,"ng-option",19),e._uU(1),e.qZA()),2&r){const n=v.$implicit;e.Q6J("value",n),e.xp6(1),e.hij("",n," d\xf2ng")}}function w(r,v){if(1&r){const n=e.EpF();e.TgZ(0,"span",15)(1,"ng-select",16,17),e.NdJ("change",function(d){return e.CHM(n),e.oxw().onChangePageSize(d)})("ngModelChange",function(d){return e.CHM(n),e.oxw().pageSize=d}),e.YNc(3,D,2,2,"ng-template",18),e.qZA()()}if(2&r){const n=e.oxw();e.xp6(1),e.Q6J("clearable",!1)("editableSearchTerm",!1)("ngModel",n.pageSize),e.xp6(2),e.Q6J("ngForOf",n.pageItems)}}let k=(()=>{class r{constructor(){this.firstRow=0,this.lastRow=0,this.totalRow=0,this.totalPage=0,this.currentPage=0,this.agId="ag-26",this.pageItems=[],this.pageSize=0,this.pageSizeChange=new e.vpe,this.gotoPage=new e.vpe}ngOnInit(){}ngOnChanges(n){}get themeName(){return!0}onGoToPage(n){this.gotoPage.emit(n)}firstPage(){this.onGoToPage(1)}prevPage(){this.currentPage>1&&this.onGoToPage(this.currentPage-1)}nextPage(){this.currentPage<this.totalPage&&this.onGoToPage(this.currentPage+1)}lastPage(){this.onGoToPage(this.totalPage)}onChangePageSize(n){this.pageSizeChange.emit(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=e.Xpm({type:r,selectors:[["cy-pagination"]],viewQuery:function(n,a){if(1&n&&e.Gf(P.w9,5),2&n){let d;e.iGM(d=e.CRH())&&(a.selPageSize=d.first)}},hostVars:2,hostBindings:function(n,a){2&n&&e.ekj("ag-theme-fresh",a.themeName)},inputs:{firstRow:"firstRow",lastRow:"lastRow",totalRow:"totalRow",totalPage:"totalPage",currentPage:"currentPage",agId:"agId",pageItems:"pageItems",pageSize:"pageSize"},outputs:{pageSizeChange:"pageSizeChange",gotoPage:"gotoPage"},features:[e.TTD],decls:31,vars:16,consts:[[1,"ag-paging-panel"],["role","status",1,"ag-paging-row-summary-panel"],[1,"ag-paging-row-summary-panel-number"],["role","presentation",1,"ag-paging-page-summary-panel"],["role","button","aria-label","First Page","tabindex","0","aria-disabled","false",1,"ag-paging-button",3,"click"],["role","presentation",1,"ag-icon","ag-icon-first"],["role","button","aria-label","Previous Page","tabindex","0","aria-disabled","false",1,"ag-paging-button",3,"click"],["role","presentation",1,"ag-icon","ag-icon-previous"],["role","status",1,"ag-paging-description"],[1,"ag-paging-number"],["role","button","aria-label","Next Page","tabindex","0","aria-disabled","false",1,"ag-paging-button",3,"click"],["role","presentation",1,"ag-icon","ag-icon-next"],["role","button","aria-label","Last Page","tabindex","0","aria-disabled","false",1,"ag-paging-button",3,"click"],["role","presentation",1,"ag-icon","ag-icon-last"],["class","ag-paging-page-size",4,"ngIf"],[1,"ag-paging-page-size"],[3,"clearable","editableSearchTerm","ngModel","change","ngModelChange"],["selPageSize",""],["ngFor","",3,"ngForOf"],[3,"value"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"span",1)(2,"span",2),e._uU(3),e.qZA(),e.TgZ(4,"span"),e._uU(5,"to"),e.qZA(),e.TgZ(6,"span",2),e._uU(7),e.qZA(),e.TgZ(8,"span"),e._uU(9,"of"),e.qZA(),e.TgZ(10,"span",2),e._uU(11),e.qZA()(),e.TgZ(12,"span",3)(13,"div",4),e.NdJ("click",function(){return a.firstPage()}),e._UZ(14,"span",5),e.qZA(),e.TgZ(15,"div",6),e.NdJ("click",function(){return a.prevPage()}),e._UZ(16,"span",7),e.qZA(),e.TgZ(17,"span",8)(18,"span"),e._uU(19,"Page"),e.qZA(),e.TgZ(20,"span",9),e._uU(21),e.qZA(),e.TgZ(22,"span"),e._uU(23,"of"),e.qZA(),e.TgZ(24,"span",9),e._uU(25),e.qZA()(),e.TgZ(26,"div",10),e.NdJ("click",function(){return a.nextPage()}),e._UZ(27,"span",11),e.qZA(),e.TgZ(28,"div",12),e.NdJ("click",function(){return a.lastPage()}),e._UZ(29,"span",13),e.qZA()(),e.YNc(30,w,4,4,"span",14),e.qZA()),2&n&&(e.uIk("id",a.agId),e.xp6(2),e.uIk("id",a.agId+"-first-row"),e.xp6(1),e.Oqu(a.firstRow),e.xp6(1),e.uIk("id",a.agId+"-to"),e.xp6(2),e.uIk("id",a.agId+"-last-row"),e.xp6(1),e.Oqu(a.lastRow),e.xp6(1),e.uIk("id",a.agId+"-of"),e.xp6(2),e.uIk("id",a.agId+"-row-count"),e.xp6(1),e.Oqu(a.totalRow),e.xp6(7),e.uIk("id",a.agId+"-start-page"),e.xp6(2),e.uIk("id",a.agId+"-start-page-number"),e.xp6(1),e.Oqu(a.currentPage),e.xp6(1),e.uIk("id",a.agId+"-of-page"),e.xp6(2),e.uIk("id",a.agId+"-of-page-number"),e.xp6(1),e.Oqu(a.totalPage),e.xp6(5),e.Q6J("ngIf",null==a.pageItems?null:a.pageItems.length))},directives:[y.O5,P.w9,I.JJ,I.On,y.sg,P.jq],styles:[".ag-paging-description>span,.ag-paging-row-summary-panel>span{margin-right:5px}.ag-paging-page-size{min-width:200px}\n"],encapsulation:2}),r})();function b(r,v){if(1&r){const n=e.EpF();e.TgZ(0,"cy-pagination",3),e.NdJ("gotoPage",function(d){return e.CHM(n),e.oxw().gotoPage(d)})("pageSizeChange",function(d){return e.CHM(n),e.oxw().onChangePageSize(d)}),e.qZA()}if(2&r){const n=e.oxw();e.Q6J("pageItems",n.pageItems)("pageSize",n.pageSize)("firstRow",n.firstRow)("lastRow",n.lastRow)("totalRow",n.totalRow)("totalPage",n.totalPage)("currentPage",n.currentPage)}}let z=(()=>{class r{constructor(n){this.rend=n,this.pageItems=[],this.showCustomPage=!1,this.gridModule=[],this.classList={},this.height="250px",this.loadingHtml='<span class="ag-overlay-loading-center">Please wait while your rows are loading</span>',this.defaultColDef={editable:!0,enableValue:!0,enableRowGroup:!0,enablePivot:!0,sortable:!0,resizable:!0,filter:!1},this.cellClicked=new e.vpe,this.rowClicked=new e.vpe,this.gridReady=new e.vpe,this.rowSelected=new e.vpe,this.columnApi=void 0,this.agGridApi=void 0,this.agDomLayout="normal",this.themeList=f,this.theme=f.fresh}set options(n){this.agOption=Object.assign({},this.defaultGridOption(),n),this.showCustomPage=this.agOption.pagination&&this.agOption.suppressPaginationPanel}set theme(n){this.classList[this.agThemeClass]=!1,this.agThemeClass=S(n),this.classList[this.agThemeClass]=!0,this.agTheme=n}set domLayout(n){this.agDomLayout=n||"normal",this.onUpdateDomLayout()}ngOnInit(){}ngOnChanges(n){}get isEmptyRow(){var n,a;return(null!==(a=null===(n=this.agGridApi)||void 0===n?void 0:n.getDisplayedRowCount())&&void 0!==a?a:0)>0}get options(){return null==this.agOption&&(this.agOption=Object.assign({},this.defaultGridOption())),this.agOption}get domLayout(){return this.agDomLayout}get theme(){return this.agTheme}gridApi(){return this.agGridApi}createThemeDefault(n=f.alpine){return this.classList[this.agThemeClass]=!1,this.agThemeClass=S(n),this.classList[this.agThemeClass]=!0,this.agTheme=n,this.agTheme}defaultGridOption(){return{domLayout:"autoHeight",suppressRowClickSelection:!1,rowSelection:"single",sideBar:{toolPanels:["columns","filters"]}}}onCellClicked(n){this.cellClicked.emit(n)}onRowClicked(n){this.rowClicked.emit(n)}onGridReady(n){this.agGridApi=n.api,this.columnApi=n.columnApi,this.gridReady.emit(n),this.onUpdateDomLayout()}onRowSelected(n){this.rowSelected.emit(n)}onUpdateDomLayout(n=this.agDomLayout){(0,_.Ft)(this.agGridApi)||this.agGridApi.setDomLayout(n)}setDomLayout(n){this.onUpdateDomLayout(n)}onPaginationChanged(n){let a=n.api.paginationGetCurrentPage(),d=n.api.paginationGetTotalPages(),h=n.api.paginationGetPageSize();this.totalPage=d,this.currentPage=a+1,this.totalRow=n.api.paginationGetRowCount(),this.firstRow=a*h+1,this.lastRow=this.firstRow+h-1,this.pageSize=h}gotoPage(n){this.gridApi().paginationGoToPage(n-1)}onChangePageSize(n){this.gridApi().paginationSetPageSize(n)}}return r.\u0275fac=function(n){return new(n||r)(e.Y36(e.Qsj))},r.\u0275cmp=e.Xpm({type:r,selectors:[["cy-custom-grid"]],viewQuery:function(n,a){if(1&n&&e.Gf(R.N8,7),2&n){let d;e.iGM(d=e.CRH())&&(a.grid=d.first)}},inputs:{pageItems:"pageItems",showCustomPage:"showCustomPage",gridRows:"gridRows",columns:"columns",gridModule:"gridModule",classList:"classList",height:"height",loadingHtml:"loadingHtml",defaultColDef:"defaultColDef",options:"options",theme:"theme",domLayout:"domLayout"},outputs:{cellClicked:"cellClicked",rowClicked:"rowClicked",gridReady:"gridReady",rowSelected:"rowSelected"},features:[e.TTD],decls:3,vars:11,consts:[[3,"pageItems","pageSize","firstRow","lastRow","totalRow","totalPage","currentPage","gotoPage","pageSizeChange",4,"ngIf"],[3,"ngClass","rowDragManaged","rowData","modules","defaultColDef","columnDefs","overlayLoadingTemplate","gridOptions","cellClicked","rowClicked","rowSelected","gridReady","paginationChanged"],["grid",""],[3,"pageItems","pageSize","firstRow","lastRow","totalRow","totalPage","currentPage","gotoPage","pageSizeChange"]],template:function(n,a){1&n&&(e.YNc(0,b,1,7,"cy-pagination",0),e.TgZ(1,"ag-grid-angular",1,2),e.NdJ("cellClicked",function(h){return a.onCellClicked(h)})("rowClicked",function(h){return a.onRowClicked(h)})("rowSelected",function(h){return a.onRowSelected(h)})("gridReady",function(h){return a.onGridReady(h)})("paginationChanged",function(h){return a.onPaginationChanged(h)}),e.qZA()),2&n&&(e.Q6J("ngIf",a.showCustomPage),e.xp6(1),e.Udp("height",a.height),e.Q6J("ngClass",a.classList)("rowDragManaged",!0)("rowData",a.gridRows)("modules",a.gridModule)("defaultColDef",a.defaultColDef)("columnDefs",a.columns)("overlayLoadingTemplate",a.loadingHtml)("gridOptions",a.options))},directives:[y.O5,k,R.N8,y.mk],styles:[".ag-paging-panel{justify-content:flex-start}\n"],encapsulation:2}),r})()}}]);