"use strict";(self.webpackChunkTS24AppWeb=self.webpackChunkTS24AppWeb||[]).push([[561],{6561:(rt,M,l)=>{l.r(M),l.d(M,{TicketListModule:()=>tt});var T=l(8406),g=l(3075),_=l(9808),V=l(520),O=l(4376),Y=l(5986),y=l(4219),K=l(7484),F=l(1047),z=l(6042),I=l(3087),b=l(4546),R=l(6114),Z=l(7581),D=l(5737),x=l(3677),E=l(3154),N=l(655),J=l(857),$=l(6305),G=l(7251),P=l(5740),X=l(6431),d=l(9690),W=l(5212),m=l(9646),k=l(7445),q=l(8306),ee=l(9975),te=l(4986),A=l(8505),w=l(4351),v=l(1005),S=l(3900),j=l(5698),ie=l(262),ne=l(1609),oe=l(1708),se=l(3996),L=l(2843),e=(l(6418),l(5e3));let le=(()=>{class n{constructor(t,i,o){this.userSys=t,this.odoo=i,this.ticket=o}NOTICKET(t,i){return(0,L._)(()=>({code:"NO_TICKET",message:`<b>${i}</b> > <b>Ticket ch\u01b0a \u0111\u01b0\u1ee3c t\u1ea1o</b>.`}))}ERR_SRV(t){return(0,L._)(()=>({message:"X\u1ea3y ra l\u1ed7i c\u1eadp nh\u1eadt th\xf4ng tin ticket l\xean m\xe1y ch\u1ee7.",code:"ERR_SRV",detail:t}))}checkValidTicket(t,i){let o=(i=i||["partner","od_team","od_category","od_assign"]).filter(s=>d.K$.jsonEmpty(t[s]));return 0===o.length?void 0:{code:"ERR_DATA",message:`X\u1ea3y ra l\u1ed7i > D\u1eef li\u1ec7u ch\u01b0a \u0111\xfang \u1edf field ${o.join("|")}`,detail:o}}createTicket(t){return this.odoo.ticket.newTicket(t)}updateTicket(t){return this.odoo.ticket.updateTicket(t)}addNote(t){return this.odoo.ticket.addNote(t)}uploadFile(t,i){}updateStage(t,i){let o=t.ticket_id;return((0,d.Ft)(i)||(0,d.EU)(i.id))&&(0,L._)(()=>({code:"NO_STAGE",message:`[${o}] Kh\xf4ng x\xe1c \u0111\u1ecbnh \u0111\u01b0\u1ee3c [tr\u1ea1ng th\xe1i]`})),this.odoo.ticket.closeTicket(o)}allInOne(t,i,o){o=Object.assign({alert:!1},o),t=(0,d.EU)(t)||"all"===t?null:t;let s=(0,d.EU)(t)?["create_ticket","add_note","add_note_with_img","close_ticket"]:t.split(",");return this.odoo.ticket.createAll(i,s.join(","),o)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(J.a),e.LFG(se.P),e.LFG(G.k))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C=l(8590),f=l(750),re=l(3073),U=l(7957),Q=l(1894),ae=l(2643),ce=l(2683),de=l(5969);const ue=["grid"],he=["ticketForm"],ge=["importExcelRef"],me=["linkDown"];function pe(n,c){1&n&&e._UZ(0,"i",34)}function fe(n,c){1&n&&e._UZ(0,"i",35)}function _e(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).onAgGridFilter(s)}),e.TgZ(1,"a"),e._uU(2),e.qZA()()}if(2&n){const t=c.index,i=c.$implicit;e.xp6(2),e.AsE("",t+1,". ",i.title,"")}}function Te(n,c){if(1&n&&(e.TgZ(0,"nz-form-item")(1,"nz-form-control")(2,"button",14),e._UZ(3,"i",36),e.TgZ(4,"span"),e._uU(5,"T\xecm n\xe2ng cao"),e.qZA()(),e.TgZ(6,"nz-dropdown-menu",null,37)(8,"ul",17),e.YNc(9,_e,3,2,"ng-template",38),e.qZA()()()()),2&n){const t=e.MAs(7),i=e.oxw();e.xp6(2),e.Q6J("nzTrigger","click")("nzDropdownMenu",t)("disabled",i.disabledAction),e.xp6(7),e.Q6J("ngForOf",i.allFilterObj)("ngForTrackBy",i.allFilterObjTrackByKey)}}function ke(n,c){1&n&&e._UZ(0,"i",41)}function Ce(n,c){1&n&&e._UZ(0,"i",34)}function be(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit;return e.oxw(2).onSendHelpdesk(o.code)}),e.TgZ(1,"a"),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw(),i=t.index,o=t.$implicit;e.xp6(2),e.AsE("",i+1,". ",o.label,"")}}function xe(n,c){if(1&n&&e.YNc(0,be,3,2,"li",18),2&n){const t=c.$implicit,i=e.oxw(2);e.Q6J("ngIf",i.isVisibleMenuSendTicket(t.visible))}}function Ae(n,c){if(1&n&&(e.ynx(0),e.TgZ(1,"button",14),e.YNc(2,ke,1,0,"i",39),e.YNc(3,Ce,1,0,"i",11),e.TgZ(4,"span"),e._uU(5,"G\u1eedi Ticket"),e.qZA()(),e.TgZ(6,"nz-dropdown-menu",null,40)(8,"ul",17),e.YNc(9,xe,1,1,"ng-template",38),e.qZA()(),e.BQk()),2&n){const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("nzTrigger","click")("nzDropdownMenu",t)("disabled",i.disabledAction),e.xp6(1),e.Q6J("ngIf",!i.isSendTicket),e.xp6(1),e.Q6J("ngIf",i.isSendTicket),e.xp6(6),e.Q6J("ngForOf",i.allItemSendTicket)("ngForTrackBy",i.trackBySendTicketMenu)}}function we(n,c){1&n&&e._UZ(0,"i",46)}function ve(n,c){1&n&&e._UZ(0,"i",34)}function Se(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onImportXlsx()}),e.TgZ(1,"a"),e._UZ(2,"i",41),e._uU(3,"N\u1ea1p d\u1eef li\u1ec7u"),e.qZA()()}}function ye(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).onExportXlsx()}),e.TgZ(1,"a"),e._UZ(2,"i",47),e._uU(3,"Xu\u1ea5t d\u1eef li\u1ec7u"),e.qZA()()}}function Fe(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",42),e.YNc(2,we,1,0,"i",43),e.YNc(3,ve,1,0,"i",11),e.TgZ(4,"span"),e._uU(5,"N\u1ea1p / Xu\u1ea5t DL"),e.qZA()(),e.TgZ(6,"nz-dropdown-menu",null,44)(8,"ul",17),e.YNc(9,Se,4,0,"li",18),e.YNc(10,ye,4,0,"li",18),e.TgZ(11,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onExportExcelMau()}),e.TgZ(12,"a"),e._UZ(13,"i",45),e._uU(14,"File m\u1eabu"),e.qZA()()()(),e.BQk()}if(2&n){const t=e.MAs(7),i=e.oxw();e.xp6(1),e.Q6J("nzDropdownMenu",t)("disabled",i.disabledAction),e.xp6(1),e.Q6J("ngIf",!i.isRunImport),e.xp6(1),e.Q6J("ngIf",i.isRunImport),e.xp6(6),e.Q6J("ngIf",i.isRole("import_xsl")),e.xp6(1),e.Q6J("ngIf",i.isRole("export_xsl"))}}function ze(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).showCustomColumnAgGrid(s)}),e.TgZ(1,"a"),e._uU(2),e.qZA()()}if(2&n){const t=c.$implicit,i=c.index;e.xp6(2),e.AsE("",i+2,". ",t.grid_title,"")}}function Ze(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",48),e._UZ(2,"i",49),e._uU(3,"Danh s\xe1ch m\u1eabu "),e.qZA(),e.TgZ(4,"nz-dropdown-menu",null,50)(6,"ul",51)(7,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().showColumnAgGrid("ALL")}),e.TgZ(8,"a"),e._uU(9,"1. Hi\u1ec3n th\u1ecb ALL"),e.qZA()(),e.YNc(10,ze,3,2,"ng-template",38),e.TgZ(11,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().clickCopyAllRowToClipboard()}),e.TgZ(12,"a"),e._uU(13),e.qZA()()()(),e.BQk()}if(2&n){const t=e.MAs(5),i=e.oxw();e.xp6(1),e.Q6J("nzDropdownMenu",t)("nzTrigger","hover")("disabled",i.disabledAction),e.xp6(9),e.Q6J("ngForOf",i.allGridField)("ngForTrackBy",i.trackByAg),e.xp6(3),e.hij("",i.allGridField.length+2,". Sao ch\xe9p")}}function Ee(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onDeleteMultiTicket()}),e._UZ(1,"i",22),e._uU(2,"X\xf3a Ticket "),e.qZA()}}function Le(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onAutoFixTicket()}),e._UZ(1,"i",52),e._uU(2,"T\u1ef1 \u0111\u1ed9ng s\u1eeda "),e.qZA()}}function Ue(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().createAgGridTemplate()}),e._UZ(1,"i",53),e._uU(2,"T\u1ea1o/C\u1eadp nh\u1eadt m\u1eabu "),e.qZA()}}function Me(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"li",21),e.NdJ("click",function(){return e.CHM(t),e.oxw().onSendReport()}),e._UZ(1,"i",54),e._uU(2,"G\u1eedi b\xe1o c\xe1o "),e.qZA()}}const Oe=function(){return["/admin"]};function Ie(n,c){1&n&&(e.TgZ(0,"li",55)(1,"a"),e._UZ(2,"i",56),e._uU(3,"C\u1ea5u h\xecnh"),e.qZA()()),2&n&&e.Q6J("routerLink",e.DdM(1,Oe))}function Re(n,c){if(1&n&&(e.TgZ(0,"span")(1,"span",29),e._uU(2," - "),e.qZA(),e.TgZ(3,"span",30),e._uU(4),e.qZA()()),2&n){const t=e.oxw();e.xp6(4),e.hij("C=",t.data.length," ")}}function De(n,c){if(1&n&&(e.TgZ(0,"div"),e._UZ(1,"nz-divider",59),e.TgZ(2,"nz-upload",61)(3,"a",62),e._uU(4),e.qZA()()()),2&n){const t=e.oxw(2);e.xp6(2),e.Q6J("nzBeforeUpload",t.beforeUploadDir),e.xp6(2),e.Oqu(t.lblPathDir)}}function Ne(n,c){if(1&n&&(e.TgZ(0,"label")(1,"span",67),e._uU(2),e.qZA(),e.TgZ(3,"span",68),e._uU(4,"Running =>"),e.qZA()()),2&n){const t=e.oxw(3);e.xp6(2),e.hij("[",null==t.msgObj?null:t.msgObj.action,"] ")}}function Je(n,c){if(1&n&&(e.ynx(0),e._UZ(1,"nz-divider",59),e.TgZ(2,"nz-input-group",63),e.YNc(3,Ne,5,1,"label",13),e.TgZ(4,"label"),e._uU(5,"Oki"),e.TgZ(6,"span",64),e._uU(7),e.qZA(),e.TgZ(8,"i"),e._uU(9,"+"),e.qZA()(),e.TgZ(10,"label"),e._uU(11,"Err"),e.TgZ(12,"span",65),e._uU(13),e.qZA(),e.TgZ(14,"i"),e._uU(15,"="),e.qZA()(),e.TgZ(16,"label"),e._uU(17,"TS"),e.TgZ(18,"span",66),e._uU(19),e.qZA()()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.isSendTicket),e.xp6(4),e.hij("[",(null==t.msgObj?null:t.msgObj.ok)||0,"]"),e.xp6(6),e.hij("[",(null==t.msgObj?null:t.msgObj.err)||0,"]"),e.xp6(6),e.hij("[",(null==t.msgObj?null:t.msgObj.total)||t.totalSelect,"]")}}function Ge(n,c){if(1&n){const t=e.EpF();e.TgZ(0,"div"),e._UZ(1,"nz-divider",59),e.TgZ(2,"a",69),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).stopSendTicket()}),e.TgZ(3,"span"),e._uU(4,"D\u1eebng l\u1ea1i"),e.qZA()()()}}function je(n,c){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",57)(2,"div",58),e._UZ(3,"nz-divider",59),e.TgZ(4,"label",60),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isStopTicketIfError=o}),e._uU(5,"G\u1eb7p l\u1ed7i > D\u1eebng"),e.qZA(),e._UZ(6,"nz-divider",59),e.TgZ(7,"label",60),e.NdJ("ngModelChange",function(o){return e.CHM(t),e.oxw().isUpdateIfTicketExist=o}),e._uU(8,"T\u1ea1o m\u1edbi + c\u1eadp nh\u1eadt"),e.qZA(),e.YNc(9,De,5,2,"div",13),e.YNc(10,Je,20,4,"ng-container",13),e.YNc(11,Ge,5,0,"div",13),e.qZA()(),e.BQk()}if(2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngModel",t.isStopTicketIfError),e.xp6(3),e.Q6J("ngModel",t.isUpdateIfTicketExist),e.xp6(2),e.Q6J("ngIf",t.isViewUploadDir),e.xp6(1),e.Q6J("ngIf",t.totalSelect>0||!!t.msgObj),e.xp6(1),e.Q6J("ngIf",t.isSendTicket)}}const Qe=function(){return["ls_filter"]},Be=function(){return["excel"]},He=function(){return["report"]},Ve=function(){return["/","admin","question"]};let Ye=(()=>{class n{constructor(t,i,o,s,r,a,u,p,h,it,nt,ot){this.nzModal=t,this.gridField=i,this.cd=o,this.fb=s,this.ticketCtrl=r,this.excelCtrl=a,this.router=u,this.aRouter=p,this.cfigCtrl=h,this.shared=it,this.userCtrl=nt,this.helpdesk=ot,this.allItemSendTicket=[{code:"all",label:"L\xe0m t\u1ea5t c\u1ea3 b\u01b0\u1edbc"},{code:"create_ticket",label:"G\u1eedi Ticket"},{code:"send_email",label:"G\u1eedi email",visible:!0},{code:"add_note",label:"G\u1eedi note"},{code:"add_note_with_img",label:"\u0110\xednh k\xe8m h\xecnh"},{code:"close_ticket",label:"Theo d\xf5i + \u0110\xf3ng"}],this.data=[],this.dataCache=[],this.msgObj={title:"K\u1ebft qu\u1ea3",total:0,ok:0,err:0,action:""},this.allImageUpload={},this.lblPathDir_=void 0,this.isViewUploadDir_=!1,this.domLayout="normal",this.agAllModule=[],this.gridOptions=this.createAgOption(),this.gridApi=null,this.gridColumnApi=null,this.columnDefs=[],this.agFilterType="ALL",this.excelStyles=[{id:"header",interior:{color:"#CCCCCC",pattern:"Solid"},borders:{borderBottom:{color:"#5687f5",lineStyle:"Continuous",weight:1},borderLeft:{color:"#5687f5",lineStyle:"Continuous",weight:1},borderRight:{color:"#5687f5",lineStyle:"Continuous",weight:1},borderTop:{color:"#5687f5",lineStyle:"Continuous",weight:1}}}],this.showBtnUpdate=!1,this.isNew=!0,this.isSendTicket=!1,this.isLoadSearch=!1,this.isRunImport=!1,this.isDeleteStatus=!1,this.isClickShowColKpi=!1,this.isLoadWithChanel=!1,this.isHideFormCreate="block",this.isShowMsg=!1,this.isAutoLoadCate=!0,this.chkHideTicketForm=!1,this.isUpdateIfTicketExist=!1,this.isStopTicketIfError=!1,this.fileImport=[],this.xlsxType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",this.agGridViewType=this.shared.getByKey("agGridViewType")||"DEFAULT",this.isViewSendHelpdesk=this.agGridViewType===f.g1,this.fileList=[],this.isInitPage=!0,this.autoCreate=!1,this.editTicket=null,this.nodeTicket=null,this.asyncInput=!1,this.KEY_GRID_TYPE="ticket_list",this.lblGrid={total:0,with:"Ticket",view:"STT > Z-A",countTicket:0,countChanel:0},this.groupTemp=0,this.indexStyle=0,this.agHeight=void 0,this.defaultColDef={enableValue:!0,enableRowGroup:!0,enablePivot:!0,sortable:!1,resizable:!0,suppressMenu:!0},this.allFilterObj=[{key:"all",title:"T\u1ea5t c\u1ea3",value:{}},{key:"is_send_ticket",title:"\u0110\xe3 g\u1eedi ticket",value:{is_send_ticket:!0}},{key:"is_note",title:"\u0110\xe3 \u0111\xecnh th\xeam note",value:{is_note:!0}},{key:"is_upfile",title:"\u0110\xe3 \u0111\xecnh k\xe8m h\xecnh",value:{is_upfile:!0}},{key:"is_close",title:"\u0110\xe3 \u0111\xf3ng ticket",value:{is_close:!0}},{key:"is_report",title:"\u0110\xe3 g\u1eedi b\xe1o c\xe1o",value:{is_report:!0}},{key:"is_not_send_ticket",title:"Ch\u01b0a g\u1eedi ticket",value:{is_send_ticket:!1}},{key:"is_not_note",title:"Ch\u01b0a th\xeam note",value:{is_note:!1}},{key:"is_not_upfile",title:"Ch\u01b0a \u0111\xednh k\xe8m h\xecnh",value:{is_upfile:!1}},{key:"is_not_close",title:"Ch\u01b0a \u0111\xf3ng ticket",value:{is_close:!1}},{key:"is_not_report",title:"Ch\u01b0a g\u1eedi b\xe1o c\xe1o",value:{is_report:!1}}],this.runSendTicket=void 0,this.agGridCustom={},this.beforeUploadDir=(B,H)=>(this.fileList=H,this.lblPathDir_=`(${H.length}) H\xecnh`,d.DS.getBase64(B).then(st=>(0,N.mG)(this,void 0,void 0,function*(){let lt=B.name.toLowerCase();this.allImageUpload[lt]=yield st})),!1)}ngOnInit(){let t=this.shared.catalogs.isAutoLoadCate;this.isAutoLoadCate=!!(0,d.Ft)(t)||t,this.userDetail=this.userCtrl.read(),this.gridField.getColumnAgFromCache(f.z).subscribe(s=>{this.agColumnFix=s.column_fix,this.columnDefs=this.agColumnFix.def}),this.isHideFormCreate=this.shared.getByKey("isHideFormCreate");let i=new Date,o=new Date;this.searchForm=this.fb.group({ticketOn:[[i,o]],withChanel:[!1],hideFormCreate:["none"===this.isHideFormCreate]}),this.searchForm.get("withChanel").valueChanges.subscribe(s=>{this.showTicketWithChanel(s)}),this.searchForm.get("hideFormCreate").valueChanges.subscribe(s=>{this.isHideFormCreate=s?"none":"block",this.shared.setByKey("isHideFormCreate",this.isHideFormCreate),this.onChangeHideForm(s),s||(this.isViewSendHelpdesk=!1,this.disableWithChanel(!1),this.showCustomColumnAgGrid(this.allGridFieldMap[f._J]||{}))}),this.getRowClass=s=>"ag-grid-row-style-"+(s.node.rowIndex%2==0?0:1),this.initSearchFromQuery()}initSearchFromQuery(){this.aRouter.queryParamMap.subscribe(t=>{this.searchForm.get("ticketOn").setValue([d.Em.parseDate(t.get("from"),new Date),d.Em.parseDate(t.get("to"),new Date)])})}disableWithChanel(t){console.log(t);let i=this.searchForm.get("withChanel");t?(i.setValue(!t),i.disable()):i.enable()}get isViewToolSendTicket(){return this.agGridViewType===f.g1}get lblPathDir(){return this.lblPathDir_||"Th\u01b0 m\u1ee5c h\xecnh"}get allGridFieldMap(){return this.userCtrl.read().getAgField(this.KEY_GRID_TYPE)||{}}get allGridField(){return Object.values(this.allGridFieldMap).sort((t,i)=>t.index-i.index)}get isViewUploadDir(){return this.isViewSendHelpdesk&&(this.isViewUploadDir_||this.totalSelect>0)}get countTicket(){return this.dataCache.length||0}get totalSelect(){return(0,d.Ft)(this.gridApi)?0:this.gridApi.getSelectedRows().length}get disabledAction(){return this.isLoadSearch||this.isSendTicket||this.isRunImport}isRole(t){return this.userDetail.isRole(t)}ngAfterViewInit(){this.cd.detectChanges()}ngOnChanges(t){console.log(t)}trackByAg(t,i){return`${i.grid_code}:${i.grid_code}`}trackBySendTicketMenu(t,i){return`send-ticket-menu-${i.code}`}createAgOption(){return{rowSelection:"multiple",excelStyles:this.excelStyles,getRowClass:this.getRowClass,onRowClicked:t=>this.onRowClicked(t),defaultColDef:{resizable:!0}}}agFilterPresent(){return"ALL"!==this.agFilterType}agFilterPass(t){let i=t.data;switch(this.agFilterType){case"is_send_ticket":return!(0,d.EU)(i.ticket_number);case"no_send_ticket":return(0,d.EU)(i.ticket_number);case"is_send_note":return!(0,d.EU)(i.note_id);case"no_send_note":return(0,d.EU)(i.note_id);case"is_close_ticket":return 3===i.status;case"no_close_ticket":return 3!==i.status;case"is_upfile":return(0,d.oA)(i.is_upfile);case"no_upfile":return!(0,d.oA)(i.is_upfile);case"is_report":return(0,d.oA)(i.is_greport);case"no_report":return!(0,d.oA)(i.is_greport);default:return!0}}allFilterObjTrackByKey(t,i){return i.key}onAgGridFilter(t){this.clickAsyncTicket(null,t.value)}onGridReady(t){this.gridApi=t.api,this.gridColumnApi=t.columnApi,C.q.fixColDef(this.userDetail,this.gridApi),this.showCustomColumnAgGrid(this.allGridFieldMap.ag_default)}defIfNull(t,i){return(0,d.Ft)(t)?null:i}onSaveTicket(t,i=this.nodeTicket){var o;if(t.isNew&&(0,d.Ft)(t.ticket))return null===(o=this.gridApi)||void 0===o||o.clearRangeSelection(),void(this.editTicket=void 0);const s=(t=Object.assign({isRefresh:!0},t)).ticket;(0,m.of)("").pipe((0,A.b)(r=>{if((0,d.Ft)(i)||t.isNew){let a=this.gridApi.applyTransaction({add:[s]});this.nodeTicket=a.add[0],this.editTicket=s,this.dataCache.push(s),this.refreshRow(i=this.nodeTicket)}else(0,d.Ft)(i)||this.refreshRow(i,s)})).subscribe(()=>{})}clickCopyAllRowToClipboard(){let t=!1;this.gridApi.getSelectedRows().length>0==0&&(this.gridApi.selectAll(),t=!0),this.gridApi.copySelectedRowsToClipboard({includeHeaders:!1,includeGroupHeaders:!1}),t&&this.gridApi.deselectAll(),this.shared.alert.success("\u0110\xe3 sao ch\xe9p xong, gi\u1edd v\xe0o excel \u0111\u1ec3 d\xe1n (Ctrl + V).")}isSelectRow(){return this.gridApi.getSelectedRows().length>0}clickNewTicket(){this.isNew=!0,this.editTicket=void 0}onDeleteMultiTicket(){let t=this.gridApi.getSelectedNodes();0!==t.length?(this.isShowMsg=!0,this.msgObj={title:"X\xf3a d\u1eef li\u1ec7u",total:t.length,ok:0,err:0},this.shared.modal.warning({nzTitle:"C\u1ea3nh b\xe1o !!",nzClosable:!1,nzOkText:"X\xf3a",nzCancelText:"\u0110\xf3ng",nzContent:`B\u1ea1n c\xf3 mu\u1ed1n x\xf3a ${t.length} d\xf2ng \u0111\xe3 ch\u1ecdn?`,nzOnOk:()=>{let i=this.shared.loading("\u0110ang x\xf3a d\u1eef li\u1ec7u"),s=(0,m.of)(...t).pipe((0,w.b)(a=>(0,m.of)(a).pipe((0,v.g)(1e3)))).pipe((0,S.w)(a=>(this.ticketCtrl.deleteOne(a.data.ticket_id).subscribe(),(0,m.of)(a)))).subscribe({next:a=>{this.msgObj.ok++,this.onRemoveNode(a),this.shared.alert.success(`[${a.data.ticket_id}] \u0110\xe3 x\xf3a ticket xong.`)},error:a=>{this.msgObj.err++,console.warn(a),s.unsubscribe()}}),r=(0,k.F)(100).subscribe(()=>{s.closed&&(this.shared.alert.remove(i.messageId),r.unsubscribe())})}})):this.shared.alert.info("Vui l\xf2ng ch\u1ecdn d\xf2ng c\u1ea7n x\xf3a.")}onAutoFixTicket(){let t=this.gridApi.getSelectedNodes();0!==t.length?(this.visibleColumn("send_status",!0),this.isShowMsg=!0,this.msgObj={title:"S\u1eeda d\u1eef li\u1ec7u",total:t.length,ok:0,err:0},this.shared.modal.create({nzClosable:!1,nzOkText:"S\u1eeda d\u1eef li\u1ec7u",nzCancelText:"Kh\xf4ng",nzTitle:"C\u1ea3nh b\xe1o !!",nzContent:"B\u1ea1n c\xf3 ch\u1eafc mu\u1ed1n s\u1eeda d\xf2ng \u0111\u01b0\u1ee3c ch\u1ecdn ?",nzOnOk:()=>{let i=this.shared.loading("\u0110ang s\u1eeda d\u1eef li\u1ec7u"),o=t.map(a=>(0,m.of)(a.data).pipe((0,A.b)(u=>this.refreshRow(a,{send_status:!0})),(0,S.w)(u=>this._handleAutoFixTicket(a)))),s=(0,m.of)(...o).pipe((0,w.b)(a=>a.pipe((0,v.g)(5e3)))).subscribe(a=>{this.refreshRow(a.node,Object.assign(Object.assign({},a.data),{send_status:a.status})),"error"===a.status?this.msgObj.err++:this.msgObj.ok++},a=>{this.msgObj.err++,this.refreshRow(a.node,{send_status:"error"})}),r=(0,k.F)(100).subscribe(()=>{s.closed&&(r.unsubscribe(),this.shared.alert.remove(i.messageId),this.visibleColumn("send_status",!1),this.clickAsyncTicket())})}})):this.shared.alert.info("B\u1ea1n ch\u01b0a ch\u1ecdn d\xf2ng \u0111\u1ec3 s\u1eeda.")}_handleAutoFixTicket(t){return new q.y(i=>{this.nodeTicket=t,this.ticketForm.setTicket(t.data,!0),this.ticketForm.autoFixTicket(null,!0),this.ticketForm.onSaveTicket(!1),i.next({data:{},node:t,status:"success"}),i.complete()})}clickConfigAccount(){this.router.navigate(["/account"])}clickQuestions(){this.router.navigate(["/questions"])}onRowClicked(t){this.nodeTicket=t.node,!0===this.asyncInput?this.shared.modal.confirm({nzTitle:"Th\xf4ng b\xe1o",nzContent:"B\u1ea1n \u0111ang nh\u1eadp li\u1ec7u th\xf4ng tin ticket. B\u1ea1n c\xf3 mu\u1ed1n c\u1eadp nh\u1eadt l\u1ea1i th\xf4ng tin t\u1eeb danh s\xe1ch v\u1eeba click.",nzCancelText:"Kh\xf4ng",nzOnCancel:()=>console.log("Kh\xf4ng c\u1eadp nh\u1eadt th\xf4ng tin v\u1eeda click t\u1eeb danh s\xe1ch"),nzOkText:"C\u1eadp nh\u1eadt",nzOnOk:()=>this.clickEditTicket(t.data)}):this.clickEditTicket(t.data)}clickEditTicket(t){d.K$.log("clickEditTicket()",t),this.editTicket=t,this.isLoadWithChanel||((t.chanels||[]).sort((i,o)=>i.position-o.position),this.editTicket=t,this.isNew=!1)}onRemoveTicket(t){console.log(`[${t.id}] X\xf3a Ticket`),this.onRemoveNode(this.nodeTicket)}onRemoveNode(t){this.gridApi.applyTransaction({remove:[t.data]})}clickLogout(){this.userCtrl.logout().subscribe()}clickRemoveCache(t=!0){d.K$.log("-- Xo\xe1 Cache --");let i=t?this.shared.loading("\u0110ang x\xf3a b\u1ed9 nh\u1edb"):void 0;this.cfigCtrl.clearAllCache().subscribe(o=>{void 0!==i&&(this.shared.alert.remove(i.messageId),this.shared.alert.success(o.msg,{nzDuration:2e3}))},o=>{console.warn(o)})}sortGridByIndex(t){(0,d.Ft)(this.gridApi)||(this.gridColumnApi.applyColumnState({state:[{colId:"index_stt",sort:t}]}),this.lblGrid.view="STT > "+("asc"===t?"A-Z":"Z-A"))}showColumnAgGrid(t){let i=t;switch("object"==typeof t&&(i=t.grid_code),this.shared.setByKey("agGridViewType",i),this.agGridViewType=i,this.isViewSendHelpdesk=!1,this.disableWithChanel(this.isViewToolSendTicket),i){case"ALL":this.gridColumnApi.setColumnsVisible(this.agColumnFix.id,!0);break;case"DEFAULT":this.gridColumnApi.resetColumnState();break;case"REPORT_KPI":this.sortGridByIndex("asc"),this.searchForm.controls.withChanel.setValue(!0);break;case"BODY_EMAIL":!0===this.isLoadWithChanel&&this.searchForm.get("withChanel").setValue(!1),this.visibleColumns(["content_copy"],!0);break;case f.g1:this.isViewSendHelpdesk=!0,this.msgObj=void 0,this.searchForm.get("withChanel").setValue(!1),this.searchForm.get("hideFormCreate").setValue(!0)}"object"==typeof t&&C.q.showOnlyColumns(this.gridColumnApi,this.agColumnFix.id,t)}resetDataAgrid(){this.data=[],this.dataCache=[],this.isShowMsg=!1,this.showBtnUpdate=!1,this.lblGrid.countTicket=0,this.lblGrid.countChanel=0}clickAsyncTicket(t,i){if(this.searchForm.invalid)return;this.resetDataAgrid(),this.editTicket=void 0,this.nodeTicket=void 0,this.lblPathDir_=void 0,this.isLoadSearch=!0,this.allImageUpload={},(0,d.Ft)(t)||this.searchForm.get("withChanel").setValue(t);let o=this.searchForm.value;this.isLoadWithChanel=!0===o.withChanel;const s=new _.uU("en-US").transform(o.ticketOn[0],"yyyy-MM-dd")+"T00:00:00",r=new _.uU("en-US").transform(o.ticketOn[1],"yyyy-MM-dd")+"T23:59:59";let u=this.shared.loading(`\u0110ang L\u1ea5y d\u1eef li\u1ec7u <br/>- T\u1eeb ng\xe0y: <b>${s}</b> <br/> - \u0110\u1ebfn ng\xe0y: <b>${r}</b>`);i=Object.assign({},i,{create_min:s,create_max:r}),this.ticketCtrl.findAll(i).subscribe({next:p=>{let h=p.content||[];this.lblGrid.countTicket=h.length,this.dataCache=h,this.isLoadWithChanel?(this.convertTicketByCheckViewChanel(h),this.lblGrid.countChanel=this.data.length,this.sortGridByIndex("asc")):(this.data=h,this.sortGridByIndex("asc")),this.isLoadSearch=!1,this.shared.alert.remove(u.messageId),this.shared.alert.success(`[${this.data.length}] L\u1ea5y Ticket xong r\u1ed3i.`),this.cd.detectChanges()},error:p=>{this.isLoadSearch=!1,this.shared.alert.remove(u.messageId),d.K$.log("X\u1ea3y ra l\u1ed7i l\u1ea5y d\u1eef li\u1ec7u:",p)}})}clickRefreshConfig(){}showTicketWithChanel(t){(0,d.Ft)(t)&&(t=this.searchForm.get("withChanel").value),this.isLoadWithChanel=!0===t,!0!==t?this.data=this.dataCache:this.convertTicketByCheckViewChanel()}get AgridHeader(){return this.gridColumnApi.getAllDisplayedColumns().map(i=>({[i.getColId()]:i.getColDef().headerName}))}convertTicketByCheckViewChanel(t=this.dataCache){console.log("convertTicketByCheckViewChanel()"),this.data=[];for(const i in t){const o=t[i];for(let s=0;s<o.chanels.length;s++){const r=Object.assign({},o);r.first_chanel=r.chanels[s],this.data.push(r)}}}visibleColumn(t,i=!0){this.gridColumnApi.setColumnVisible(t,i)}visibleColumns(t,i=!0,o=!0){C.q.visibleColumns(this.gridColumnApi,this.agColumnFix.id,t,i,o)}getAllRowSend(){if(this.isLoadWithChanel)return this.shared.modal.warning({nzContent:"Vui l\xf2ng b\u1ecf check `K\xeanh`"}),[];let t=this.gridApi.getSelectedNodes();return 0===t.length?(this.shared.modal.warning({nzContent:"Vui l\xf2ng ch\u1ecdn ticket \u0111\u1ec3 g\u1eedi"}),[]):(this.visibleColumn("send_status",!0),t)}refreshRow(t,i={}){C.q.refreshRow(this.gridApi,t,i)}onSendHelpdesk(t="all"){if("send_email"==t)return void this.shared.modal.warning({nzContent:"Ch\u01b0a x\xe2y d\u1ef1ng !!",nzOkText:"OKe !!"});this.showColumnAgGrid(f.g1);let i=this.getAllRowSend();if(0==i.length)return;let o=["all","add_note_with_img"].includes(t);if(o&&this.isViewUploadDir&&(0,d.gS)(this.allImageUpload))return void this.shared.modal.warning({nzTitle:"C\u1ea3nh b\xe1o !!",nzContent:"Vui l\xf2ng ch\u1ecdn th\u01b0 m\u1ee5c ch\u1ee9a h\xecnh \u0111\xednh k\xe8m."});this.isShowMsg=!0,this.isSendTicket=!0,this.msgObj={title:"G\u1eedi Ticket",total:i.length,ok:0,err:0,action:t},o=o&&!(0,d.gS)(this.allImageUpload);let s=i.map(u=>(0,m.of)(u.data.ticket_id).pipe((0,A.b)(p=>this.refreshRow(u,{send_status:!0})),(0,S.w)(p=>this.handleSendTicket(u,t,o)))),r=(0,m.of)(...s).pipe((0,w.b)(u=>u.pipe((0,v.g)(1e3))));this.runSendTicket=r.subscribe(u=>{this.refreshRow(u.node,Object.assign(Object.assign({},u.data),{send_status:u.status})),"error"===u.status?(this.msgObj.err++,this.showErrorAndStop(this.runSendTicket,u.node.data.ticket_id,u.data.error)):this.msgObj.ok++},u=>{this.msgObj.err++,this.refreshRow(u.node,{send_status:"error"}),this.showErrorAndStop(this.runSendTicket,u.node.data.ticket_id,u.error)});let a=(0,k.F)(500).subscribe(u=>{!(0,d.Ft)(this.runSendTicket)&&this.runSendTicket.closed&&(this.isSendTicket=!1,a.unsubscribe())},(0,j.q)(1))}handleSendTicket(t,i,o){i=(0,d.EU)(i)||"all"===i?null:i;let s=Object.assign({},t.data),r=!1===o?null:Object.keys(s.od_image).filter(u=>void 0!==this.allImageUpload[u]).map(u=>({[u]:this.allImageUpload[u]})).reduce((u,p)=>Object.assign(Object.assign({},u),p),{});return this.helpdesk.allInOne(i,s.ticket_id,{isUpdate:this.isUpdateIfTicketExist,stopError:this.isStopTicketIfError,image_base64:r}).pipe((0,S.w)(u=>(0,m.of)({status:"success",node:t,data:u})),(0,ie.K)(u=>(0,m.of)({status:"error",node:t,data:{error:u}})))}stopSendTicket(){if(!(0,d.Ft)(this.runSendTicket)){this.runSendTicket.unsubscribe(),this.shared.alert.warning("\u0110\xe3 d\u1eebng g\u1eedi !!");let t=(0,k.F)(1e3).subscribe(i=>{this.clickAsyncTicket(),t.unsubscribe()},(0,j.q)(1))}}showErrorAndStop(t,i,o){"SessionExpired"===o.code?(t.unsubscribe(),this.shared.modal.error({nzTitle:"C\u1ea3nh b\xe1o !!",nzContent:o.message})):(this.shared.alert.error(`[${i}] > ${o.message}`),this.isStopTicketIfError&&t.unsubscribe())}onExportExcelMau(){this.excelCtrl.downloadFile(f.AK).subscribe()}onExportXlsx(){C.q.exportExcel(this.gridApi,this.gridColumnApi,{fileName:"report_kpi"})}onImportXlsx(){return(0,N.mG)(this,void 0,void 0,function*(){this.isRunImport=!0,this.msgObj={title:"N\u1ea1p Excel",ok:0,err:0,total:0},this.shared.modal.create({nzTitle:"N\u1ea1p d\u1eef li\u1ec7u t\u1eeb file excel",nzContent:ne.Q,nzClassName:"select-file",nzClosable:!1,nzMaskClosable:!0,nzFooter:null,nzComponentParams:{isImportAndSave:!0}}).afterClose.pipe((0,A.b)(i=>{var o;if((0,d.Ft)(i))return void(this.isRunImport=!1);i=Object.assign({isSave:!1,items:[]},i),this.data=[],this.dataCache=[],this.msgObj.total=i.items.length,this.msgObj.action=!0===i.isSave?"L\u01b0u":"Th\xeam";let s=null!==(o=i.isSave)&&void 0!==o&&o,r=i.items.map(h=>this.prepareTicketFromXlsx(h)),u=(0,ee.x)(r,te.z).pipe((0,w.b)(h=>(0,m.of)(h).pipe((0,v.g)(2e3)))).subscribe({next:h=>{if(console.log(h),this.msgObj.ok++,s)throw this.ticketForm.isAutoCreate=!0,this.ticketForm.setTicket(h,!0),this.ticketForm.onSaveTicket(),new Error("Close method");this.onSaveTicket({isNew:!0,ticket:h})},error:h=>{this.msgObj.err++,console.warn(h)}}),p=(0,k.F)(1e3).subscribe(h=>{u.closed&&(this.isRunImport=!1,p.unsubscribe())})})).subscribe()})}prepareTicketFromXlsx(t){let i=Object.assign({},t);if(["software","group_help","support_help","product_id","chanels"].forEach(s=>delete i[s]),!(0,d.EU)(t.chanels)){let s=t.chanels.split(",").map(a=>a.trim()),r=this.ticketForm.chanels.filter(a=>s.includes(a.extend_code));r.length>0&&(i.chanels=r)}if(!(0,d.EU)(t.software)){let s=t.software.trim(),r=this.ticketForm.softwares.filter(a=>a.code===s);r.length>0&&(i.software=r[0])}if(!(0,d.EU)(t.group_help)){let s=t.group_help.trim(),r=this.ticketForm.ghelps.filter(a=>a.code===s);r.length>0&&(i.group_help=r[0])}if(!(0,d.EU)(t.support_help)){let s=t.support_help.trim(),r=this.ticketForm.chanels.filter(a=>a.extend_code===s);r.length>0&&(i.support_help=r[0])}if(!(0,d.EU)(t.product_id)){let s=t.product_id.trim(),r=this.ticketForm.products.filter(a=>a.id===s);r.length>0&&(i.product=r[0])}return i}isShowTool(t){if("tool3"===t){let i=["delete_list","fix_row"];return this.totalSelect>0&&i.filter(o=>this.userDetail.isRole(o)).length>0}return"tool4"===t&&this.agGridViewType===f.g1}showCustomColumnAgGrid(t){this.showColumnAgGrid(t),this.agGridCustom=t}convertColumnToObject(){const t=(s,r)=>({width:s.getActualWidth(),index:r});return this.gridColumnApi.getAllDisplayedColumns().map((s,r)=>({[s.getColId()]:t(s,r+1)})).reduce((s,r)=>Object.assign(Object.assign({},s),r),{})}createAgGridTemplate(){let t=Object.assign({},this.agGridCustom,{grid_fields:this.convertColumnToObject()});this.shared.modal.create({nzFooter:null,nzClosable:!1,nzMaskClosable:!1,nzContent:re.l,nzComponentParams:{model:"ticket_list",field:t}}).afterClose.subscribe(o=>{(0,d.gS)(o)||this.showColumnAgGrid(o)})}handleUpload(){console.log(this.allImageUpload)}onSendReport(){this.router.navigateByUrl("/send-report")}onUpdateApiKey(){this.ticketForm.onUpdateApiKey()}isVisibleMenuSendTicket(t){return null==t||t}onChangeHideForm(t){this.domLayout=t?"autoHeight":"normal",this.allImageUpload=[]}onClickCreateTicket(t){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.Sf),e.Y36(oe.P),e.Y36(e.sBO),e.Y36(g.qu),e.Y36(G.k),e.Y36(P.x),e.Y36(T.F0),e.Y36(T.gz),e.Y36(X.t),e.Y36($.W),e.Y36(J.a),e.Y36(le))},n.\u0275cmp=e.Xpm({type:n,selectors:[["t2t-table"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ue,5),e.Gf(he,5),e.Gf(ge,5),e.Gf(me,5)),2&t){let o;e.iGM(o=e.CRH())&&(i.grid=o.first),e.iGM(o=e.CRH())&&(i.ticketForm=o.first),e.iGM(o=e.CRH())&&(i.importComp=o.first),e.iGM(o=e.CRH())&&(i.linkDown=o.first)}},features:[e.TTD],decls:69,vars:40,consts:[[3,"ticket","isAutoLoadCate","showBorderTool","asyncInput","save","remove"],["ticketForm",""],[1,"ag-ticket"],[1,"row","tool-2","mb-5px"],[1,"col-12"],["nz-form","",1,"search-form",3,"nzLayout","formGroup"],[2,"margin-left","2px","width","287px"],["formControlName","ticketOn",3,"nzFormat"],["nz-checkbox","","formControlName","withChanel"],["nz-checkbox","","formControlName","hideFormCreate",3,"nzCheckedChange"],["type","button","nz-button","",3,"disabled","click"],["class","fa-regular fa-arrows-spin fa-spin",4,"ngIf"],["class","fa-regular fa-magnifying-glass",4,"ngIf"],[4,"ngIf"],["nz-button","","nz-dropdown","",3,"nzTrigger","nzDropdownMenu","disabled"],[1,"fa-regular","fa-plus-minus"],["nzMenuOther",""],["nz-menu",""],["nz-menu-item","",3,"click",4,"ngIf"],[1,"fa-regular","fa-file-export"],["nzMenuAccount",""],["nz-menu-item","",3,"click"],[1,"fa-regular","fa-circle-trash"],[3,"routerLink"],[1,"fa-regular","fa-circle-question"],["nz-menu-item","",3,"routerLink",4,"ngIf"],[1,"fa-regular","fa-copy"],[1,"fa-regular","fa-right-from-bracket"],[1,"countRow"],[1,"lbl"],[1,"number"],[2,"width","100%","height","100%"],[3,"gridRows","columns","options","theme","height","domLayout","gridReady"],["grid",""],[1,"fa-regular","fa-arrows-spin","fa-spin"],[1,"fa-regular","fa-magnifying-glass"],[1,"fa-regular","fa-filter"],["nzMenuFilter",""],["ngFor","",3,"ngForOf","ngForTrackBy"],["class","fa-regular fa-cloud-arrow-up",4,"ngIf"],["nzMenuSendHelpdesk",""],[1,"fa-regular","fa-cloud-arrow-up"],["nz-button","","nz-dropdown","","nzTrigger","hover",3,"nzDropdownMenu","disabled"],["class","fa-regular fa-file-import",4,"ngIf"],["nzMenuNXDL",""],[1,"fa-regular","fa-file-excel"],[1,"fa-regular","fa-file-import"],[1,"fa-regular","fa-cloud-arrow-down"],["nz-button","","nz-dropdown","",3,"nzDropdownMenu","nzTrigger","disabled"],[1,"fa-regular","fa-bars"],["nzMenuReport",""],["nz-menu","",1,"ag_grid"],[1,"fa-regular","fa-hammer"],[1,"fa-regular","fa-calendar-lines-pen"],[1,"fa-regular","fa-send-backward"],["nz-menu-item","",3,"routerLink"],[1,"fa-regular","fa-gears"],[1,"row","tool-3","mb-2","mt-2"],[1,"col-12","d-flex"],["nzType","vertical",1,"align-self-center"],["nz-checkbox","",3,"ngModel","ngModelChange"],["nzAccept","image/png","nzMultiple","",3,"nzBeforeUpload"],[1,"link_dir"],[1,"send-log","d-flex","align-items-center"],[1,"oki"],[1,"err"],[1,"total"],[1,"act"],[1,"run"],[1,"btnStopSend",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"cy-ticket-form",0,1),e.NdJ("asyncInput",function(s){return i.asyncInput=s})("save",function(s){return i.onSaveTicket(s)})("remove",function(s){return i.onRemoveTicket(s)}),e.qZA(),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"form",5)(6,"nz-form-item")(7,"nz-form-control",6),e._UZ(8,"nz-range-picker",7),e.qZA()(),e.TgZ(9,"nz-form-item")(10,"nz-form-control")(11,"label",8),e._uU(12,"K\xeanh"),e.qZA(),e.TgZ(13,"label",9),e.NdJ("nzCheckedChange",function(s){return i.onChangeHideForm(s)}),e._uU(14,"\u1ea8n Form"),e.qZA()()(),e.TgZ(15,"nz-form-item")(16,"nz-form-control")(17,"button",10),e.NdJ("click",function(){return i.clickAsyncTicket()}),e.YNc(18,pe,1,0,"i",11),e.YNc(19,fe,1,0,"i",12),e._uU(20,"L\u1ea5y d\u1eef li\u1ec7u "),e.qZA()()(),e.YNc(21,Te,10,5,"nz-form-item",13),e.TgZ(22,"nz-form-item")(23,"nz-form-control"),e.YNc(24,Ae,10,7,"ng-container",13),e.YNc(25,Fe,15,6,"ng-container",13),e.YNc(26,Ze,14,6,"ng-container",13),e.TgZ(27,"button",14),e._UZ(28,"i",15),e._uU(29,"Kh\xe1c "),e.qZA(),e.TgZ(30,"nz-dropdown-menu",null,16)(32,"ul",17),e.YNc(33,Ee,3,0,"li",18),e.YNc(34,Le,3,0,"li",18),e.YNc(35,Ue,3,0,"li",18),e.YNc(36,Me,3,0,"li",18),e.qZA()(),e.TgZ(37,"button",14),e._UZ(38,"i",19),e._uU(39,"T\xe0i kho\u1ea3n "),e.qZA(),e.TgZ(40,"nz-dropdown-menu",null,20)(42,"ul",17)(43,"li",21),e.NdJ("click",function(){return i.clickRemoveCache()}),e.TgZ(44,"a"),e._UZ(45,"i",22),e._uU(46,"X\xf3a Cache"),e.qZA()(),e.TgZ(47,"li",21),e.NdJ("click",function(){return i.clickQuestions()}),e.TgZ(48,"a",23),e._UZ(49,"i",24),e._uU(50,"C\xe2u h\u1ecfi"),e.qZA()(),e.YNc(51,Ie,4,2,"li",25),e.TgZ(52,"li",21),e.NdJ("click",function(){return i.onUpdateApiKey()}),e._UZ(53,"i",26),e._uU(54,"M\xe3 k\xedch ho\u1ea1t"),e.qZA(),e.TgZ(55,"li",21),e.NdJ("click",function(){return i.clickLogout()}),e.TgZ(56,"a"),e._UZ(57,"i",27),e._uU(58,"\u0110\u0103ng xu\u1ea5t"),e.qZA()()()(),e.TgZ(59,"label",28)(60,"span",29),e._uU(61,"T\u1ed5ng s\u1ed1: "),e.qZA(),e.TgZ(62,"span",30),e._uU(63),e.qZA(),e.YNc(64,Re,5,1,"span",13),e.qZA()()()()()(),e.YNc(65,je,12,5,"ng-container",13),e.TgZ(66,"div",31)(67,"cy-custom-grid",32,33),e.NdJ("gridReady",function(s){return i.onGridReady(s)}),e.qZA()()()),2&t){const o=e.MAs(31),s=e.MAs(41),r=e.MAs(68);e.Udp("display",i.isHideFormCreate),e.Q6J("ticket",i.editTicket)("isAutoLoadCate",i.isAutoLoadCate)("showBorderTool",!1),e.xp6(5),e.Q6J("nzLayout","inline")("formGroup",i.searchForm),e.xp6(3),e.Q6J("nzFormat","yyyy-MM-dd"),e.xp6(9),e.Q6J("disabled",i.disabledAction),e.xp6(1),e.Q6J("ngIf",i.isLoadSearch),e.xp6(1),e.Q6J("ngIf",!i.isLoadSearch),e.xp6(2),e.Q6J("ngIf",i.userDetail.isRole(e.DdM(36,Qe))),e.xp6(3),e.Q6J("ngIf",i.isShowTool("tool4")),e.xp6(1),e.Q6J("ngIf",i.userDetail.isRole(e.DdM(37,Be))),e.xp6(1),e.Q6J("ngIf",i.userDetail.isRole(e.DdM(38,He))),e.xp6(1),e.Q6J("nzTrigger","hover")("nzDropdownMenu",o)("disabled",i.disabledAction),e.xp6(6),e.Q6J("ngIf",i.isRole("delete_ticket")),e.xp6(1),e.Q6J("ngIf",i.isRole("fix_row")),e.xp6(1),e.Q6J("ngIf",i.isRole("create_grid")),e.xp6(1),e.Q6J("ngIf",i.isRole("send_report")),e.xp6(1),e.Q6J("nzTrigger","hover")("nzDropdownMenu",s)("disabled",i.disabledAction),e.xp6(11),e.Q6J("routerLink",e.DdM(39,Ve)),e.xp6(3),e.Q6J("ngIf",i.isRole("admin")),e.xp6(12),e.hij("T=",i.countTicket," "),e.xp6(1),e.Q6J("ngIf",i.isLoadWithChanel),e.xp6(1),e.Q6J("ngIf",i.isViewToolSendTicket),e.xp6(2),e.Q6J("gridRows",i.data)("columns",i.columnDefs)("options",i.gridOptions)("theme",r.themeList.balham)("height","370px")("domLayout",i.domLayout)}},directives:[W.n,g._Y,g.JL,b.Lr,g.sg,Q.SK,b.Nx,Q.t3,b.Fd,E.uw,E.wS,g.JJ,g.u,R.Ie,z.ix,ae.dQ,ce.w,_.O5,x.wA,x.cm,x.RR,y.wO,_.sg,y.r9,T.yS,T.rH,D.g,g.On,Z.FY,F.gB,de.P],styles:[".ag-ticket{box-sizing:border-box;margin-bottom:40px;border-top:2px solid #2f54eb;padding-top:.5rem}.ag-ticket .fal{font-size:1rem;font-weight:inherit}.ag-ticket .fal.fa-exclamation-circle{color:var(--bs-red)}.ag-ticket .fal.fa-times{color:var(--bs-danger)}.ag-ticket .fal.fa-comment{color:var(--bs-info)}ul.ag_grid .menu-header{padding:unset}ul.ag_grid .menu-header .title{padding:5px 12px}.send-log{width:unset}.send-log label{margin-right:5px}.send-log label i{margin-left:5px}.send-log label .err{color:var(--bs-red)}.send-log label .oki{color:var(--bs-success)}.send-log label .total{color:var(--bs-indigo)}.send-log label .run{color:var(--bs-primary)}a.link_dir{color:var(--bs-red)!important}.ant-divider{top:-.3em}.search-form nz-range-picker,.search-form [nz-checkbox]{margin-right:5px}.search-form.ant-form-inline .ant-form-item{margin-right:0}.search-form label.countRow .lbl{color:#007bff}.search-form label.countRow .number{color:red}.row.tool-3 .ant-form-item{margin:9px 0 15px}.row.tool-3 .ant-form-item-control{line-height:0px}.row.tool-3 .col-send-result{font-weight:700}.row.tool-3 .col-send-result .ok{margin-left:5px;color:#007bff}.row.tool-3 .col-send-result .err{margin-left:5px;color:#dc3545}.row.tool-3 .col-send-result .total{margin-left:5px;color:#28a745}.row.tool-3 .btnStopSend{color:#0056b3;text-decoration:underline}[nz-menu]{min-width:200px}[nz-menu] .ant-divider-inner-text{padding:0 10px}.select-file .ant-modal-body{padding:0}\n"],encapsulation:2}),n})(),Ke=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.ez,g.u5,g.UX,U.Qp,z.sL,I.PV,Z.cS]]}),n})();var $e=l(1298);let Pe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[_.ez,F.o7]]}),n})();var Xe=l(1497),We=l(4971),qe=l(3220);const et=[{path:"",component:Ye,canActivate:[Xe.L]}];let tt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[],imports:[[_.ez,T.Bz.forChild(et),V.JF,g.u5,g.UX,We.R,qe.AgTemplateModule,E.Hb,Ke,O.A0,y.ip,K.vh,F.o7,R.Wr,x.b1,Y.LV,D.S,z.sL,I.PV,b.U5,Z.cS,$e.w,Pe],U.Qp,O.A0]}),n})()}}]);